{"title":"macOS下利用VMware Fusion进行linux内核调试","date":"2018-07-30T06:45:18.000Z","slug":"macOS下利用VMware-Fusion进行linux内核调试","updated":"2018-07-30T07:36:44.000Z","content":"<h3 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h3><p>最近两周一直在做内核的fuzz,也没有好好调一下漏洞,有机会偷偷懒还是得调一调,不然手生 啊.</p>\n<h3 id=\"mac下的调试方式\"><a href=\"#mac下的调试方式\" class=\"headerlink\" title=\"mac下的调试方式\"></a>mac下的调试方式</h3><p>刚开始利用了改写vmx下的debugStub.listen.guest64 = “1”设置来进行调试设置,但是gdb一直不能够read到一些内存,而且还不能中断,就很难受,所以改为双机调试.<br>首先参考<a href=\"http://eternalsakura13.com/2018/04/15/kernel_debug/\" target=\"_blank\" rel=\"noopener\">http://eternalsakura13.com/2018/04/15/kernel_debug/</a><br>进行内核的安装和符号文件的拉取,kernel对应的源代码,但是到双机调试的时候就出现问题了,vmwara fusion中没有添加pipe管道这么一个选项.<br>但是其实vmwarefusion是完全支持这么个调试方式的,参考如下如下的文章进行设置:<a href=\"https://github.com/coolbrain/enviroment-monitoring-system\" target=\"_blank\" rel=\"noopener\">https://github.com/coolbrain/enviroment-monitoring-system</a><br>即可成功的进行调试.<br><img src=\"/img/kdb.png\" alt=\"kdb被调试端\"><br><img src=\"/img/gef.png\" alt=\"gdb调试端\"></p>\n<p>利用CVE-2017-8890的poc运行一下.<br><img src=\"/img/crash.png\" alt=\"crash\"><br>可以发现能够正确的跟踪到segment fault.</p>\n<p>如果没有设置好的话多参考参考下面的一些文章即可.</p>\n<h3 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考\"></a>参考</h3><p><a href=\"https://insinuator.net/2014/01/serial-port-debugging-between-two-virtual-machines-in-vmware-fusion/\" target=\"_blank\" rel=\"noopener\">https://insinuator.net/2014/01/serial-port-debugging-between-two-virtual-machines-in-vmware-fusion/</a><br><a href=\"https://github.com/coolbrain/enviroment-monitoring-system\" target=\"_blank\" rel=\"noopener\">https://github.com/coolbrain/enviroment-monitoring-system</a><br><a href=\"http://eternalsakura13.com/2018/04/15/kernel_debug/\" target=\"_blank\" rel=\"noopener\">http://eternalsakura13.com/2018/04/15/kernel_debug/</a><br><a href=\"http://bestwing.me/2018/03/23/Linux_Kernel_Debugging_with_VMware_and_GDB/\" target=\"_blank\" rel=\"noopener\">http://bestwing.me/2018/03/23/Linux_Kernel_Debugging_with_VMware_and_GDB/</a><br><a href=\"http://advdbg.org/\" target=\"_blank\" rel=\"noopener\">http://advdbg.org/</a></p>\n","prev":{"title":"double free之Fastbin Attack","slug":"double-free之Fastbin-Attack"},"next":{"title":"安恒杯第八次周周练writeup","slug":"安恒杯第八次周周练writeup"},"link":"https://foyjog.github.io/post/macOS下利用VMware-Fusion进行linux内核调试/"}